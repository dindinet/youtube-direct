<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>

<head>
  <title>
  List
  </title>
</head>

<link rel="stylesheet" type="text/css" href="style.css" />

<script type="text/javascript" src="js/ext/jquery-1.4.4.min.js"></script>
<script type="text/javascript">

  jQuery(document).ready(function() {
	  getAllSubmissions(function(entries) {
		for (var i=0; i<entries.length; i++) {
			var entry = entries[i];
			var id = entry.videoId;
			var title = entry.videoTitle;
			var status = entry.status;
			if (status == 1) {
				jQuery('#list').append('<b>' + title + '</b><br><br>');
				jQuery('#list').append(getVideoHTML(id, 200, 175));
				jQuery('#list').append('<br><br>');
			}
		}
	  });
  });

  function getAllSubmissions(callback) {
		var url = '/ApprovedVideoFeed?id=1';
		var ajaxCall = {};
		ajaxCall.cache = false;
		ajaxCall.type = 'GET';
		ajaxCall.url = url;
		ajaxCall.dataType = 'json';
		ajaxCall.success = function(data) {		
			callback(data.entries);
		};	
		jQuery.ajax(ajaxCall);	
  }
  
  function getVideoHTML(videoId, width, height) {
		
		width = width || 250;
		height = height || 250;
		
		var youtubeUrl = 'http://www.youtube.com/v/' + videoId;
		
		var html = [];
		html.push('<object width="' + width + '" height="' + height + '">');
		html.push('<param name="movie" value="');
		html.push(youtubeUrl);
		html.push('&hl=en&fs=1&"></param>');
		html.push('<param name="allowFullScreen" value="true"></param>');
		html.push('<param name="allowscriptaccess" value="always"></param>');
		html.push('<embed src="');
		html.push(youtubeUrl);
		html.push('&hl=en&fs=1&" type="application/x-shockwave-flash"');
		html.push(' allowscriptaccess="always" allowfullscreen="true" width="' + width + '" height="' + height + '">');
		html.push('</embed></object>');	
		
		return html.join('');
	}  
</script>

<style>
body {
  font-size: 12px;
  color: black;
  font-family: arial;
}
b {
	font-size: 13px;
}
h2 {
	font-size: 15px;
}
</style>

<body>
<div align=center>
<div id="list">
<h2>Video Responses:</h2><br><br>
</div>
</div>
</body>

</html>
